{% extends 'header.html' %}
{% block title %}Task List{% endblock %}

{% block content %}
    <h1>Tasks</h1>
    <ul id="taskList">
        {% for task in tasks %}
            <li>{{ task.description }}</li>
        {% endfor %}
    </ul>


<div id="taskStatus"> </div>
   <!-- <div>
        <p>Check out the tasks <a href="{{ url_for('get_tasks') }}">here</a>.</p>
    </div> -->

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
        function fetchTasks() {
            $.ajax({
                url: "{{ url_for('get_tasks') }}",
                method: "GET",
                success: function (data) {
                    $('#taskList').empty();
                    $.each(data.tasks, function (index, task) {
                        $('#taskList').append('<li>' + task.description + '</li>');
                    });
                },
                error: function (error) {
                    console.log("Error fetching tasks:", error);
                }
            });
        }

        setInterval(fetchTasks, 5000);
    </script>
    {% endblock %}
</body>
</html>
